%h1= "Feature Audit for #{params[:id]}"

= form_tag(feature_audit_path(params[:id]), method: "get", class: 'form-horizontal') do
  .form-group.row
    = label_tag(:to, "To:", class: 'col-md-1 control-label')
    .col-md-2
      = text_field_tag(:to, "", class: 'form-control')
  .form-group.row
    = label_tag(:from, "From:", class: 'col-md-1 control-label')
    .col-md-2
      = text_field_tag(:from, "", class: 'form-control')
  .row
    .col-md-3
      = submit_tag("Submit", class: "btn btn-primary pull-right")

- if @authors
  %h2 Authors
  %ul
  - @authors.each do |author|
    %li.author=author

- if @tickets.present?
  %h2 Tickets
  %table.table.table-striped
    %thead
      %tr
        %th key
        %th summary
        %th status
        %th approver email
        %th approved at
    %tbody
      - @tickets.each do |ticket|
        %tr.ticket
          %td= ticket.key
          %td= ticket.summary
          %td= ticket.status
          %td= ticket.approver_email
          %td= ticket.approved_at.try(:utc)

- if @deploys.present?
  %h2 Deploys
  %table.table.table-striped
    %thead
      %tr
        %th Server
        %th Software Version
        %th Deployed by
    %tbody
      - @deploys.each do |deploy|
        %tr.deploy
          %td= deploy.server
          %td= deploy.version
          %td= deploy.deployed_by

- if @builds.present?
  %h2 Builds
  %table.table.table-striped
    %thead
      %tr
        %th Source
        %th Status
        %th Software Version
    %tbody
      - @builds.each do |build|
        %tr.build
          %td= build.source
          %td= build.status
          %td= build.version
